
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Creating a Web Service using Apache Axis2 [No IDE] - nuts!</title>
  <meta name="author" content="chamila de alwis">

   
  <meta name="description" content="">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://chamilad.github.io/blog/2014/07/01/creating-a-web-service-using-apache-axis2-no-ide">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="nuts!" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
  

</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/index.html">Home</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/chamilad" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://linkedin.com/in/chamiladealwis" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/chamilad" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://plus.google.com/102488741988320223009" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
    
    
    

    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    Creating a Web Service Using Apache Axis2 [No IDE]
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2014-07-01T16:38:50+05:30" pubdate data-updated="true">Jul 1<sup>st</sup>, 2014</time></h5>
  </div>
</header>
  <div class="row-fluid">
    <div class="span12">
      <h1>Outline</h1>

<ol>
<li>Pre-requisites</li>
<li>Deploying Axis2</li>
<li>Writing the service class</li>
<li>Deploying the service</li>
<li>Verification</li>
</ol>


<h1>Pre-requisites</h1>

<p>We need Apache Axis2 running and a suitable container. You could also run Axis2 as a standalone server but for this let&rsquo;s use Tomcat as a container. So in the following order</p>

<ol>
<li>Download and install JDK7</li>
<li>Download and install Tomcat 7 (even 8 would do, but it seems as of now Tomcat 8 isn&rsquo;t being supported by Eclipse, so let&rsquo;s go with v7)</li>
<li>Download and install AXis2 on Tomcat</li>
</ol>


<h2>JDK7</h2>

<p>Download and extract the JDK tarball.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget --no-check-certificate --no-cookies --header <span class="s2">&quot;Cookie: oraclelicense=accept-securebackup-cookie&quot;</span> http://download.oracle.com/otn-pub/java/jdk/7u60-b19/jdk-7u60-linux-x64.tar.gz
</span><span class='line'>tar zxvf jdk-7u60-linux-x64.tar.gz
</span></code></pre></td></tr></table></div></figure>


<p>Add and modify the following lines in ~/.profile or /etc/profile (for system wide application) to add <code>JAVA_HOME</code> environment variable and it&rsquo;s bin folder to <code>$PATH</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/path/to/jdk/extraction
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/bin:<span class="nv">$JAVA_HOME</span>/bin
</span></code></pre></td></tr></table></div></figure>


<p>Refresh the terminal session and check if Java is working</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">source</span> ~/.profile
</span><span class='line'>java -version
</span></code></pre></td></tr></table></div></figure>


<h2>Tomcat 7</h2>

<p>You could install tomcat through <code>apt-get</code> or manually.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install tomcat7
</span></code></pre></td></tr></table></div></figure>


<p>Or download and set paths manually.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget http://supergsego.com/apache/tomcat/tomcat-7/v7.0.54/bin/apache-tomcat-7.0.54.tar.gz
</span><span class='line'>tar zxvf apache-tomcat-7.0.54.tar.gz
</span><span class='line'>mv apache-tomcat-7.0.54 ~/dev/
</span></code></pre></td></tr></table></div></figure>


<p>Add the <code>$CATALINA_HOME</code> env var to the bash profile.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vi ~/.profile
</span></code></pre></td></tr></table></div></figure>


<p>Prepend the following line before exporting the $PATH.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">CATALINA_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/dev/apache-tomcat-7.0.54
</span></code></pre></td></tr></table></div></figure>


<p>Server start/stop can be done by the scripts in the <code>$CATALINA_HOME/bin</code> folder.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="nv">$CATALINA_HOME</span>
</span><span class='line'>./bin/startup.sh
</span></code></pre></td></tr></table></div></figure>


<h1>Deploying Axis2</h1>

<p>Download Axis2 WAR distribution and copy the web archive file to the tomcat webapps root.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget http://apache.tradebit.com/pub//axis/axis2/java/core/1.6.2/axis2-1.6.2-war.zip
</span><span class='line'>unzip axis2-1.6.2-war.zip -d axis2-war
</span><span class='line'>cp axis2-war/axis2.war <span class="nv">$CATALINA_HOME</span>/webapps/
</span><span class='line'><span class="nb">cd</span> <span class="nv">$CATALINA_HOME</span>/bin
</span><span class='line'>./shutdown.sh
</span><span class='line'>./startup.sh
</span></code></pre></td></tr></table></div></figure>


<p>In the browser go to <a href="http://localhost:8080/axis2">http://localhost:8080/axis2</a>. Axis2 welcome page should appear.</p>

<h1>The Service</h1>

<p>An Axis2 archive (of <code>.aar</code> extension) has a certain directory structure not so different from a Web Archive.</p>

<figure class='code'><figcaption><span>Axis2 Archive Directory Structure start:1 linenos:false mark:4,9</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>.
</span><span class='line'>├── SimpleService
</span><span class='line'>    └─── META-INF
</span><span class='line'>      └─── services.xml
</span><span class='line'>    └── com
</span><span class='line'>      └─── chamiladealwis
</span><span class='line'>        └─── ws
</span><span class='line'>          └─── service
</span><span class='line'>            └─── SimpleService.java
</span></code></pre></td></tr></table></div></figure>


<p>META-INF folder contains the services descriptor file. The other is the binary which implements the service.</p>

<p>The service class itself is a plain old Java class which exposes the services it offers through public methods. My simple service would be the following.</p>

<figure class='code'><figcaption><span>SimpleService.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">chamiladealwis</span><span class="o">.</span><span class="na">ws</span><span class="o">.</span><span class="na">service</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleService</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">num1</span><span class="o">,</span> <span class="kt">int</span> <span class="n">num2</span><span class="o">)</span>
</span><span class='line'>  <span class="o">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">num1</span><span class="o">+</span><span class="n">num2</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>SimpleService</code> offers just one service  named <code>add</code> which accepts two Integer parameters and returns the sum of them as an Integer.</p>

<p>Now this service needs a service descriptor which exposes the service class to Axis2 when asked.</p>

<figure class='code'><figcaption><span>services.xml mark:3</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service&gt;</span>
</span><span class='line'>    <span class="nt">&lt;parameter</span> <span class="na">name=</span><span class="s">&quot;ServiceClass&quot;</span> <span class="na">locked=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        com.chamiladealwis.ws.service.SimpleService
</span><span class='line'>    <span class="nt">&lt;/parameter&gt;</span>
</span><span class='line'>    <span class="nt">&lt;operation</span> <span class="na">name=</span><span class="s">&quot;sayHello&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;messageReceiver</span> <span class="na">class=</span><span class="s">&quot;org.apache.axis2.rpc.receivers.RPCMessageReceiver&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/operation&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/service&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>A parameter named <code>ServiceClass</code> is defined with value <code>com.chamiladealwis.ws.service.SimpleService</code> which the FQN of the Java class we just wrote.</p>

<p>Now compile sources, create the Axis2 archive and deploy it in the Axis Server.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># go to the root dir and compile the sources</span>
</span><span class='line'>javac com/chamiladealwis/ws/service/*.java
</span><span class='line'>
</span><span class='line'><span class="c"># create the archive file</span>
</span><span class='line'>jar cvf SimpleService.aar *
</span><span class='line'>
</span><span class='line'><span class="c"># copy the archive over to the Axis2 web root</span>
</span><span class='line'>cp SimpleService.aar <span class="nv">$CATALINE_HOME</span>/webapps/axis2/WEB-INF/services/
</span><span class='line'>
</span><span class='line'><span class="c"># restart tomcat</span>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$CATALINA_HOME</span>/bin
</span><span class='line'>./shutdown.sh
</span><span class='line'>./startup.sh
</span></code></pre></td></tr></table></div></figure>


<p>Browse to <a href="http://localhost:8080/axis2/services/listServices">http://localhost:8080/axis2/services/listServices</a> in your browser and you will see <code>SimpleService</code> being listed as an availble service with <code>add</code> as an operation.</p>

<p>Click on the link to <code>SimpleService</code> to view the WSDL file which will describe the service and it&rsquo;s operation in an abstracted XML interpretation that can be used to create clients in any language to consume the service.</p>

<h1>The Client</h1>

<p>The client code has to make use of a &ldquo;Stub&rdquo; of the service which will act as a proxy and a communication agent. Axis2 binary distribution includes tools which can generate the Java stub using the WSDL file as the source.</p>

<p>Download the Axis2 binary distribution, extract it and set <code>AXIS2_HOME</code> environment variable to its root. Add <code>$AXIS2_HOME</code> to <code>$PATH</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget http://apache.spinellicreations.com//axis/axis2/java/core/1.6.2/axis2-1.6.2-bin.zip
</span><span class='line'>unzip axis2-1.6.2-bin.zip
</span><span class='line'><span class="nb">pwd</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add the <code>$AXIS2_HOME</code> variable before <code>export PATH</code> line and modify <code>$PATH</code> to include <code>$AXIS2_HOME/bin</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">AXIS2_HOME</span><span class="o">=</span>/path/to/axis2/binary/folder
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;$PATH:$AXIS2_HOME/bin&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now refresh terminal by sourcing the .profile file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">source</span> ~/.profile
</span><span class='line'><span class="nb">echo</span> <span class="nv">$AXIS2_HOME</span>
</span></code></pre></td></tr></table></div></figure>


<p>Copy the WSDL path of the <code>SimpleService</code>, go to the directory you&rsquo;re going to create your client code and execute the following.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>./wsdl2java.sh -uri WSDL_PATH_OF_THE_SIMPLESERVICE -o client
</span></code></pre></td></tr></table></div></figure>


<p>The WSDL path would be something similar to <code>http://localhost:8080/axis2/services/SimpleService?wsdl</code>.</p>

<p>This will create the Java stub and the CallbackHandler classes. The CallbackHandler class can be extended to implement custom success and error callback executions. The Stub is the class of main importance here. It contains the Request and Response types of the operations available from the Service it was generated from and the skeletol methods that call to the target endpoint once invoked. We will use these members to call our simple service.</p>

<figure class='code'><figcaption><span>SimpleServiceClient.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">chamiladealwis</span><span class="o">.</span><span class="na">ws</span><span class="o">.</span><span class="na">client</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.rmi.RemoteException</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.apache.axis2.AxisFault</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.chamiladealwis.ws.client.SimpleServiceStub.Add</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.chamiladealwis.ws.client.SimpleServiceStub.AddResponse</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleClient</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">try</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="c1">// Create the Stub object</span>
</span><span class='line'>            <span class="n">SimpleServiceStub</span> <span class="n">serviceStub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleServiceStub</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Create the Request object. The request class is autogenerated</span>
</span><span class='line'>            <span class="c1">// as an inner class of the Stub class.</span>
</span><span class='line'>            <span class="n">Add</span> <span class="n">addReq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Add</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Set parameters</span>
</span><span class='line'>            <span class="n">addReq</span><span class="o">.</span><span class="na">setNum1</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
</span><span class='line'>            <span class="n">addReq</span><span class="o">.</span><span class="na">setNum2</span><span class="o">(</span><span class="mi">8</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Invoke method and get response as a response object</span>
</span><span class='line'>            <span class="n">AddResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">serviceStub</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addReq</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Response object&#39;s get_return() returns the return of the remote </span>
</span><span class='line'>            <span class="c1">// method</span>
</span><span class='line'>            <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">get_return</span><span class="o">();</span>
</span><span class='line'>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Sum : &quot;</span> <span class="o">+</span> <span class="n">sum</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">AxisFault</span> <span class="n">e</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s go through the client code.</p>

<p>Consuming an operation available through a Web Service consists of following steps.</p>

<ul>
<li>Create an object of the stub. All method calls will be invoked through this object.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">SimpleServiceStub</span> <span class="n">serviceStub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleServiceStub</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Create the request object. This will have methods to add input parameters to the request.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Add</span> <span class="n">addReq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Add</span><span class="o">();</span>
</span><span class='line'><span class="n">addReq</span><span class="o">.</span><span class="na">setNum1</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
</span><span class='line'><span class="n">addReq</span><span class="o">.</span><span class="na">setNum2</span><span class="o">(</span><span class="mi">8</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Invoke and the operation method. The operation method will be invoked through the stub object and the invocation accepts a parameter of type of request object.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">serviceStub</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addReq</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Catch the response object. The invocation will return the response object mainly containing the value returned by the operation.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">AddResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">serviceStub</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addReq</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Extract the return value. By calling <code>get_return()</code> of the response object the return value can be extracted.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">get_return</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you see it&rsquo;s pretty straightforward, although there are couple of things to keep in mind.</p>

<ol>
<li>You have to regenerate the client stubs everytime you change most of the server code (obviously).</li>
<li>It&rsquo;s good to check if the service has been properly deployed by going to the services page and checking the WSDL generation.</li>
<li>This was a <em>simple</em> client with <em>simple</em> input and output types. When complex types are involved there are some standards to be practiced. Be mindful that Web Services operate on a language and platform agnostic environment.</li>
<li><em>You will not be writing web services and clients this way most of the time!</em> But that&rsquo;s a topic for another post :)</li>
</ol>


    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        



  <a href="/blog/categories/axis2/"><span class="badge">axis2</span></a>

  <a href="/blog/categories/web-services/"><span class="badge">web services</span></a>

  <a href="/blog/categories/wso2/"><span class="badge">wso2</span></a>




        </p>
      </div>
      
      <div class="span6 social-sharing">
        <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_button_google_plusone" g:plusone:size="small"></a>
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/blog/2014/06/10/what-to-expect/" title="Previous Post: what to expect">&laquo; what to expect</a>
          
          
            <a class="basic-alignment right" href="/blog/2014/07/07/wso2-esb-sample-screw-ups/" title="Next Post: WSO2 ESB Sample Screw Ups">WSO2 ESB Sample Screw Ups &raquo;</a>
          
        </p>
      </div>
    </div>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2014 - chamila de alwis -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'chamila-01';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://chamilad.github.io/blog/2014/07/01/creating-a-web-service-using-apache-axis2-no-ide/';
        var disqus_url = 'http://chamilad.github.io/blog/2014/07/01/creating-a-web-service-using-apache-axis2-no-ide/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
